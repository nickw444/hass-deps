language: python
python:
  - '3.9'

install:
  - pip install pipenv
  - pipenv install --system --dev
  - pip install .

script:
  - flake8 hass_deps
  - black --check hass_deps
  - mypy --strict hass_deps

before_deploy:
  - git describe --tags > VERSION

deploy:
  provider: pypi
  skip_cleanup: true
  user: nickw444-deploy
  password: "$PYPI_PASSWORD"
  on:
    tags: true
    python: 3.9

PYPI_PASSWORD:
  secure: jnSHzL95DHY/JJW6oTpVerdZN/VVJUoJ1cd4rKCzJvj4P8Iy9OIdndqjPS+CSyDD527Sr+h/1PYaDDNHH1kJ0TCO+TUiuMP/Mk5Tm+XZXHHVT5Syey5//UBhmVbC0p44oknP+6QIq0WFMYCw9EfXpK1yow7rMAq05MrCAihG7Lyzcj5vHvtXzQCugVse5A6dbVHprwvfKFvYLN8juCofonIlTQAr05IdlTCHzmi1iV0nkkdyFrgdjiUy3OidqI+9MfkY7cgEX69Sh6BDxCHZPDqEbzXvicg19DvhPOWM1uLOWEemeM7mv7apuBKf5ZvVISB/TQiI/bm5axMPwxYrshYaKhPyflA99s0XhkIJqwfYQk4NZ1Dj8nkoiKEyxKUUSXmlXhmHp6GHHDdQBK57zfb162Ra9AoK6q5qQ/aIdyxzW2V3ip7+RQJJ3tqSdhOph+meHHHVaQgn1ABgjJP82lv6Z1smpr1XYWPQ8C8JOuMtAy9kGfkV3lbh3HbJUzabCxmK8T/yiA6yT+OdE3AFV9CKjysxOyuPjSl17+zZkMyJmAX5P1Q2izpmZK6FfxtqCMJ35jLs7L8SkP3+2e+MOdIqqnpllvsj5rLfw0lIeEkyic0wMneLhd+WVON//OjhSGz3hi3Y8mQPabvMyWZ3BeQ8aWHGVsRwZpoGUtIOBzw=
